# 关键点检测项目

## 项目结构 

.
├── pt/ # 模型文件目录
│ ├── A.pt # A类别模型（4点检测）
│ ├── C.pt # C类别模型（2点检测）
│ ├── D.pt # D类别模型（2点检测）
│ ├── JB.pt # JB类别模型（2点检测）
│ └── CDJ.pt # 合并模型（C、D、JB类别的2点检测）
├── test/ # 测试图片输入目录
├── pt_2_results/ # 双模型检测结果输出目录
├── pt_4_results/ # 四模型检测结果输出目录
├── pt_detector-2.py # 双模型检测脚本
├── pt_detector-4.py # 四模型检测脚本
└── requirements.txt # 项目依赖文件

## 检测方案说明

### 1. 四模型检测 (pt_detector-4.py)
- 使用4个独立的模型分别检测不同类别
- A类别：检测4个关键点，并计算两线段交点
- C类别：检测2个关键点
- D类别：检测2个关键点
- JB类别：检测2个关键点

### 2. 双模型检测 (pt_detector-2.py)
- 使用2个模型进行检测
- A模型：检测4个关键点，并计算两线段交点
- CDJ合并模型：同时检测C、D、JB三个类别，每个类别2个关键点

## 使用说明

1. 安装依赖

    ```bash
    pip install -r requirements.txt
    ```

2. 数据准备
- 在项目根目录创建 `test` 文件夹
- 将待检测图片放入 `test` 文件夹
- 确保所有模型文件位于 `pt` 文件夹中

3. 运行检测
```bash
# 运行四模型检测
python pt_detector-4.py

# 运行双模型检测
python pt_detector-2.py
```

## 输出结果

### 1. 可视化结果
- 检测框：绿色边界框
- 关键点：不同颜色标识不同点位
- 点位标注：显示点位编号和置信度
- A类别特殊显示：
  - 两条线段的延长线
  - 交点位置（黄色）
  - 交点坐标标注

### 2. CSV数据文件
每个类别生成独立的CSV文件，包含：
- 图片名称
- 检测置信度
- 各关键点坐标 (x, y)
- A类别额外包含交点坐标

## 注意事项
1. 检测结果分别保存在 `pt_2_results` 和 `pt_4_results` 目录
2. 图片尺寸会自动调整为 530×802，不足部分添加黑色边框
3. 所有坐标值均为调整后尺寸下的坐标

                    
## 写给赵老师的 ##
非常感谢这些天的实习指导，让我对这个行业有了更深的认识，也让我对未来的学习有了更明确的方向。万分感谢
对于这个项目的焊缝的类别检测还是关键点检测我觉得还是使用多类别的模型比较好，因为每个类别的焊缝的形状和大小都差不多，多类别模型可以分辨出这些焊缝类型中的一些细节上的差异，所以使用多类别的模型比较好。
在代码中写了2个版本的你可以进行对比，一个是多类别的模型，一个是单类别的模型。
有一个注意点，那个图片的名称最好是数字，不然的话可能会在追后的排序上出现报错。



于2月4号5点拿到多类别模型，经过简单测试发现加载多类别模型检测时只检测到A和C类，由于时间关系在这个节点上无法判断是模型训练数据集比例问题还是判断逻辑问题，初步判断大概率是判断逻辑问题，可能需要做一些调整
